{
  "project": "NetMonitor-iOS Device Details",
  "branchName": "ralph/device-details",
  "description": "Add a Device Details page accessible from the Network Map. Tapping a device opens an info/tools page with device information pre-populated. Includes DNS/mDNS name resolution, MAC address vendor lookup via API, and quick-action tool launchers.",
  "userStories": [
    {
      "id": "US-001",
      "title": "Enhance LocalDevice model with resolution fields",
      "description": "As a developer, I want the LocalDevice model to store resolved hostnames, manufacturer info, and discovered services so that the Device Details page has rich data to display.",
      "acceptanceCriteria": [
        "LocalDevice has resolvedHostname: String? field (from DNS PTR/mDNS)",
        "LocalDevice has manufacturer: String? field (from MAC OUI lookup)",
        "LocalDevice has openPorts: [Int]? field for discovered ports",
        "LocalDevice has discoveredServices: [String]? field for Bonjour services",
        "Existing data and migrations are handled gracefully by SwiftData",
        "Typecheck passes",
        "Build succeeds"
      ],
      "priority": 1,
      "passes": false
    },
    {
      "id": "US-002",
      "title": "MAC address vendor lookup service",
      "description": "As a user, I want the app to automatically look up the manufacturer/vendor of a device from its MAC address so that I can identify unknown devices on my network.",
      "acceptanceCriteria": [
        "New MACVendorLookupService using maclookup.app free API (GET https://api.maclookup.app/v2/macs/{mac})",
        "Service is @MainActor @Observable with async lookup method",
        "Handles rate limiting gracefully (no API key needed for basic use)",
        "Returns vendor/manufacturer name string",
        "Caches results to avoid redundant API calls",
        "Updates LocalDevice.manufacturer on successful lookup",
        "Typecheck passes",
        "Unit tests pass"
      ],
      "priority": 2,
      "passes": false
    },
    {
      "id": "US-003",
      "title": "Device name resolution via DNS and mDNS",
      "description": "As a user, I want the app to automatically resolve device hostnames using DNS reverse lookup and mDNS so that I see friendly names instead of just IP addresses.",
      "acceptanceCriteria": [
        "New DeviceNameResolver service that chains: DNS PTR lookup -> mDNS/Bonjour name -> fallback to IP",
        "Uses existing DNSLookupService for PTR record queries",
        "Uses existing BonjourDiscoveryService to match IP to service names",
        "Runs automatically after device discovery scan completes",
        "Updates LocalDevice.resolvedHostname with best available name",
        "LocalDevice.displayName prefers customName > resolvedHostname > hostname > ipAddress",
        "Typecheck passes",
        "Unit tests pass"
      ],
      "priority": 2,
      "passes": false
    },
    {
      "id": "US-004",
      "title": "Device Details View with device info display",
      "description": "As a user, I want to tap on a device in the Network Map to see a detailed info page showing IP, MAC, hostname, manufacturer, status, latency, and discovery time.",
      "acceptanceCriteria": [
        "New DeviceDetailView showing all device properties in organized sections",
        "Header section: device icon, display name, status badge (online/offline/idle)",
        "Network Info section: IP address, MAC address, manufacturer, hostname",
        "Status section: latency, first seen, last seen, is gateway badge",
        "Notes section: editable notes field",
        "Uses Liquid Glass design system (GlassCard, Theme colors)",
        "All interactive elements have accessibility identifiers ({screen}_{element}_{descriptor})",
        "Typecheck passes",
        "Build succeeds"
      ],
      "priority": 3,
      "passes": false
    },
    {
      "id": "US-005",
      "title": "Device quick-action tool launchers",
      "description": "As a user, I want quick-action buttons on the Device Details page that launch tools (Ping, Port Scan, DNS Lookup, Wake-on-LAN) pre-populated with this device's IP/hostname.",
      "acceptanceCriteria": [
        "Quick Actions section with tool buttons: Ping, Port Scan, DNS Lookup, Wake-on-LAN",
        "Each button navigates to the corresponding tool view with the device IP pre-populated",
        "Tool views accept optional pre-populated host parameter",
        "PingToolView, PortScannerToolView, DNSLookupToolView, WakeOnLANToolView updated to accept initialHost parameter",
        "Wake-on-LAN only shown if device.supportsWakeOnLan is true or MAC is available",
        "Uses GlassButton styling with appropriate variants",
        "All buttons have accessibility identifiers",
        "Typecheck passes",
        "Build succeeds"
      ],
      "priority": 4,
      "passes": false
    },
    {
      "id": "US-006",
      "title": "Navigation from Network Map to Device Details",
      "description": "As a user, I want to tap a device in the Network Map view (both topology and list) to navigate to its Device Details page.",
      "acceptanceCriteria": [
        "Tapping a device node in topology view navigates to DeviceDetailView",
        "Tapping a device row in the device list navigates to DeviceDetailView",
        "Navigation uses NavigationStack with NavigationLink or navigationDestination",
        "DeviceDetailView receives the device context (IP address to look up LocalDevice)",
        "Back navigation returns to Network Map",
        "Selected device state is cleared on navigation",
        "Typecheck passes",
        "Build succeeds"
      ],
      "priority": 4,
      "passes": false
    },
    {
      "id": "US-007",
      "title": "Discovered services display on Device Details",
      "description": "As a user, I want to see what services (HTTP, SSH, SMB, AirPlay, etc.) are running on a device so I can understand its role on the network.",
      "acceptanceCriteria": [
        "Services section on DeviceDetailView shows Bonjour-discovered services",
        "Each service shows name, type, and port",
        "Port scan results shown as open ports with service names",
        "Auto-runs lightweight service probe on detail page load",
        "Loading state shown while services are being discovered",
        "Typecheck passes",
        "Build succeeds"
      ],
      "priority": 5,
      "passes": false
    },
    {
      "id": "US-008",
      "title": "Unit and UI tests for Device Details feature",
      "description": "As a developer, I want comprehensive test coverage for the Device Details feature to ensure reliability.",
      "acceptanceCriteria": [
        "Unit tests for MACVendorLookupService (mock API responses)",
        "Unit tests for DeviceNameResolver (mock DNS/Bonjour)",
        "Unit tests for DeviceDetailViewModel",
        "UI test screen object: DeviceDetailScreen",
        "UI tests for navigation from Network Map to Device Details",
        "UI tests for device info display",
        "UI tests for quick-action buttons",
        "All tests pass",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": false
    }
  ]
}
